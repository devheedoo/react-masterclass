{"version":3,"sources":["states/statusAtom.ts","states/todosAtom.ts","states/todosSelector.ts","components/CreateStatus.tsx","components/CreateTodo.tsx","components/ClearLocalStorage.tsx","components/Todo.tsx","components/TodoList.tsx","App.tsx","index.tsx","theme.ts"],"names":["DEFAULT_STATUSES","statusAtom","atom","key","default","statusesAtom","todosAtom","todosSelector","selector","get","todos","status","filter","todo","CreateStatus","useRecoilState","statuses","setStatuses","useForm","register","handleSubmit","setValue","formState","onSubmit","console","log","newStatuses","window","localStorage","setItem","JSON","stringify","validate","includes","type","placeholder","errors","message","CreateTodo","setTodos","useSetRecoilState","useRecoilValue","newTodo","id","Date","getTime","text","currentTodos","newTodos","SaveAndClearLocalStorage","setStatus","onClick","event","preventDefault","clear","Todo","handleClick","name","currentTarget","currentIndex","findIndex","slice","map","s","disabled","TodoList","loadSavedTodos","a","savedTodos","parse","getItem","savedStatuses","length","useEffect","ClearLocalStorage","onInput","value","style","marginTop","GlobalStyle","createGlobalStyle","props","theme","backgroundColor","textColor","App","ReactDOM","render","StrictMode","accentColor","document","getElementById"],"mappings":"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","file":"static/js/main.4d4a490e.chunk.js","sourcesContent":["import { atom } from 'recoil';\n\nexport const DEFAULT_STATUSES = ['TODO', 'DOING', 'DONE'];\n\nexport const statusAtom = atom<string>({\n  key: 'status',\n  default: DEFAULT_STATUSES[0],\n});\n\nexport const statusesAtom = atom<string[]>({\n  key: 'statuses',\n  default: DEFAULT_STATUSES,\n});\n","import { atom } from 'recoil';\nimport { ITodo } from '../interfaces';\n\nexport const todosAtom = atom<ITodo[]>({\n  key: 'todos',\n  default: [],\n});\n","import { selector } from 'recoil';\nimport { ITodo } from '../interfaces';\nimport { statusAtom } from './statusAtom';\nimport { todosAtom } from './todosAtom';\n\nexport const todosSelector = selector<ITodo[]>({\n  key: 'todosSelector',\n  get: ({ get }) => {\n    const todos = get(todosAtom);\n    const status = get(statusAtom);\n    return todos.filter((todo) => todo.status === status);\n  },\n});\n","import { useForm } from 'react-hook-form';\nimport { useRecoilState } from 'recoil';\nimport { statusesAtom } from '../states/statusAtom';\n\ninterface IForm {\n  status: string;\n}\n\nfunction CreateStatus() {\n  const [statuses, setStatuses] = useRecoilState(statusesAtom);\n  const { register, handleSubmit, setValue, formState } = useForm<IForm>();\n  const handleValid = ({ status }: IForm) => {\n    console.log('Add:', status);\n    const newStatuses = [...statuses, status];\n    window.localStorage.setItem('statuses', JSON.stringify(newStatuses));\n    setStatuses(newStatuses);\n    setValue('status', '');\n  };\n  return (\n    <form onSubmit={handleSubmit(handleValid)}>\n      <input\n        {...register('status', {\n          validate: (status) =>\n            statuses.includes(status)\n              ? `ERROR: ${status} already exists.`\n              : true,\n        })}\n        type=\"text\"\n        placeholder=\"Add a status\"\n      />\n      <button>Add</button>\n      <span>{formState.errors?.status?.message}</span>\n    </form>\n  );\n}\n\nexport default CreateStatus;\n","import { useForm } from 'react-hook-form';\nimport { useRecoilValue, useSetRecoilState } from 'recoil';\nimport { ITodo } from '../interfaces';\nimport { statusAtom } from '../states/statusAtom';\nimport { todosAtom } from '../states/todosAtom';\n\ninterface IForm {\n  todo: string;\n}\n\nfunction CreateTodo() {\n  const setTodos = useSetRecoilState(todosAtom);\n  const status = useRecoilValue(statusAtom);\n  const { register, handleSubmit, setValue } = useForm<IForm>();\n  const handleValid = ({ todo }: IForm) => {\n    console.log('Add:', todo);\n    const newTodo: ITodo = {\n      id: new Date().getTime(),\n      text: todo,\n      status,\n    };\n    setTodos((currentTodos) => {\n      const newTodos = [newTodo, ...currentTodos];\n      window.localStorage.setItem('todos', JSON.stringify(newTodos));\n      return newTodos;\n    });\n    setValue('todo', '');\n  };\n  return (\n    <form onSubmit={handleSubmit(handleValid)}>\n      <input {...register('todo')} type=\"text\" placeholder=\"Add a todo\" />\n      <button>Add</button>\n    </form>\n  );\n}\n\nexport default CreateTodo;\n","import { useSetRecoilState } from 'recoil';\nimport {\n  DEFAULT_STATUSES,\n  statusAtom,\n  statusesAtom,\n} from '../states/statusAtom';\nimport { todosAtom } from '../states/todosAtom';\n\nfunction SaveAndClearLocalStorage() {\n  const setTodos = useSetRecoilState(todosAtom);\n  const setStatuses = useSetRecoilState(statusesAtom);\n  const setStatus = useSetRecoilState(statusAtom);\n\n  const clearAllWithLocalStorage = (\n    event: React.FormEvent<HTMLButtonElement>\n  ) => {\n    event.preventDefault();\n    window.localStorage.clear();\n    setTodos([]);\n    setStatuses(DEFAULT_STATUSES);\n    setStatus(DEFAULT_STATUSES[0]);\n  };\n\n  return (\n    <div>\n      <button onClick={clearAllWithLocalStorage}>\n        Clear all with LocalStorage\n      </button>\n    </div>\n  );\n}\n\nexport default SaveAndClearLocalStorage;\n","import React from 'react';\nimport { useRecoilValue, useSetRecoilState } from 'recoil';\nimport { ITodo } from '../interfaces';\nimport { statusesAtom } from '../states/statusAtom';\nimport { todosAtom } from '../states/todosAtom';\n\nfunction Todo({ id, text, status }: ITodo) {\n  const setTodos = useSetRecoilState(todosAtom);\n  const statuses = useRecoilValue(statusesAtom);\n  const handleClick = (event: React.FormEvent<HTMLButtonElement>) => {\n    const {\n      currentTarget: { name },\n    } = event;\n\n    setTodos((todos) => {\n      const currentIndex = todos.findIndex((todo) => todo.id === id);\n      const newTodo = { id, text, status: name };\n      const newTodos = [\n        ...todos.slice(0, currentIndex),\n        newTodo,\n        ...todos.slice(currentIndex + 1),\n      ];\n      window.localStorage.setItem('todos', JSON.stringify(newTodos));\n      return newTodos;\n    });\n  };\n\n  return (\n    <li>\n      <span>{text}</span>\n      {statuses.map((s) => (\n        <button name={s} onClick={handleClick} disabled={s === status}>\n          {s}\n        </button>\n      ))}\n    </li>\n  );\n}\n\nexport default Todo;\n","import React, { useEffect } from 'react';\nimport { useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil';\nimport {\n  DEFAULT_STATUSES,\n  statusAtom,\n  statusesAtom,\n} from '../states/statusAtom';\nimport { todosAtom } from '../states/todosAtom';\nimport { todosSelector } from '../states/todosSelector';\nimport CreateStatus from './CreateStatus';\nimport CreateTodo from './CreateTodo';\nimport ClearLocalStorage from './ClearLocalStorage';\nimport Todo from './Todo';\n\nfunction TodoList() {\n  const todos = useRecoilValue(todosSelector);\n  const setTodos = useSetRecoilState(todosAtom);\n  const [statuses, setStatuses] = useRecoilState(statusesAtom);\n\n  const [status, setStatus] = useRecoilState(statusAtom);\n  const handleInput = (event: React.FormEvent<HTMLSelectElement>) => {\n    const {\n      currentTarget: { value },\n    } = event;\n    setStatus(value);\n  };\n\n  const loadSavedTodos = async () => {\n    const savedTodos = JSON.parse(window.localStorage.getItem('todos') ?? '[]');\n    const savedStatuses = JSON.parse(\n      window.localStorage.getItem('statuses') ?? '[]'\n    );\n    console.log('savedTodos:', savedTodos);\n    console.log('statuses:', savedStatuses);\n    setTodos(savedTodos);\n    savedStatuses.length > 0\n      ? setStatuses(savedStatuses)\n      : setStatuses(DEFAULT_STATUSES);\n  };\n\n  useEffect(() => {\n    loadSavedTodos();\n  }, []);\n\n  return (\n    <div>\n      <h1>TODOLIST</h1>\n      <ClearLocalStorage />\n      <CreateStatus />\n      <select onInput={handleInput} value={status}>\n        {statuses.map((status) => (\n          <option key={status} value={status}>\n            {status}\n          </option>\n        ))}\n      </select>\n      <CreateTodo />\n      <div style={{ marginTop: 10 }}>\n        <ul>\n          {todos.map((todo) => (\n            <Todo key={todo.id} {...todo} />\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport default TodoList;\n","import { createGlobalStyle } from 'styled-components';\nimport TodoList from './components/TodoList';\n\nconst GlobalStyle = createGlobalStyle`\n  @import url('https://fonts.googleapis.com/css2?family=Ubuntu&display=swap');\n  html, body, div, span, applet, object, iframe,\n  h1, h2, h3, h4, h5, h6, p, blockquote, pre,\n  a, abbr, acronym, address, big, cite, code,\n  del, dfn, em, img, ins, kbd, q, s, samp,\n  small, strike, strong, sub, sup, tt, var,\n  b, u, i, center,\n  dl, dt, dd, ol, ul, li,\n  fieldset, form, label, legend,\n  table, caption, tbody, tfoot, thead, tr, th, td,\n  article, aside, canvas, details, embed, \n  figure, figcaption, footer, header, hgroup, \n  menu, nav, output, ruby, section, summary,\n  time, mark, audio, video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font-size: 100%;\n    font: inherit;\n    vertical-align: baseline;\n  }\n  /* HTML5 display-role reset for older browsers */\n  article, aside, details, figcaption, figure, \n  footer, header, hgroup, menu, nav, section {\n    display: block;\n  }\n  body {\n    line-height: 1;\n    font-family: 'Ubuntu', sans-serif;\n    background-color: ${(props) => props.theme.backgroundColor};\n    color: ${(props) => props.theme.textColor};\n  }\n  ol, ul {\n    list-style: none;\n  }\n  blockquote, q {\n    quotes: none;\n  }\n  blockquote:before, blockquote:after,\n  q:before, q:after {\n    content: '';\n    content: none;\n  }\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n  }\n  a {\n    text-decoration: none;\n    color: inherit\n  }\n  * {\n    box-sizing: border-box;\n  }\n`;\n\nfunction App() {\n  return (\n    <>\n      <GlobalStyle />\n      <TodoList />\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { RecoilRoot } from \"recoil\";\nimport { ThemeProvider } from \"styled-components\";\nimport App from \"./App\";\nimport { darkTheme } from \"./theme\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <RecoilRoot>\n      <ThemeProvider theme={darkTheme}>\n        <App />\n      </ThemeProvider>\n    </RecoilRoot>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","import { DefaultTheme } from 'styled-components';\n\nexport const darkTheme: DefaultTheme = {\n  backgroundColor: '#cd6133',\n  textColor: '#f7f1e3',\n  accentColor: '#ff793f',\n};\n"],"sourceRoot":""}